<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Layout Preview</title>
	<link rel="stylesheet" href="../../../dist/layout.css">
	<style>
		@layer layout.demo {
			body {
				background: Canvas;
				color: CanvasText;
				color-scheme: light dark;
				margin: 0;
			}
			html {
				interpolate-size: allow-keywords;
				--layout-primary-bg: hsl(220, 100%, 95%);
				--layout-primary-c: hsl(220, 100%, 20%);
				--layout-secondary-bg: hsl(120, 50%, 95%);
				--layout-secondary-c: hsl(120, 50%, 20%);
				--layout-tertiary-bg: hsl(30, 10%, 95%);
				--layout-tertiary-c: hsl(30, 80%, 20%);
			}
			item-card:empty {
				background: var(--bg, #DDD);
				max-inline-size: 100%;
				min-block-size: 14rem;
				&:nth-of-type(12n+1) { --bg: cornflowerblue; }
				&:nth-of-type(12n+2) { --bg: lightcoral; }
				&:nth-of-type(12n+3) { --bg: lightgreen; }
				&:nth-of-type(12n+4) { --bg: lightgoldenrodyellow; }
				&:nth-of-type(12n+5) { --bg: lightpink; }
				&:nth-of-type(12n+6) { --bg: lightseagreen; }
				&:nth-of-type(12n+7) { --bg: lightsteelblue; }
				&:nth-of-type(12n+8) { --bg: lightsalmon; }
				&:nth-of-type(12n+9) { --bg: lightyellow; }
				&:nth-of-type(12n+10) { --bg: lightcyan; }
				&:nth-of-type(12n+11) { --bg: lightgray; }
				&:nth-of-type(12n+12) { --bg: lightblue; }
				&[repeat] {
					filter: grayscale(95%) brightness(.9);
				}
			}
		}
	</style>
</head>
<body>
	<lay-out id="layout">
		<item-card></item-card>
		<item-card></item-card>
		<item-card></item-card>
	</lay-out>

	<script>
		// Listen for messages from parent window
		window.addEventListener('message', (event) => {
			if (event.data.type === 'updateLayout') {
				const layout = document.getElementById('layout');
				const { name, value } = event.data;

				if (name === 'bleed-mode') {
					if (value === 'full') {
						layout.setAttribute('bleed', '');
					} else {
						layout.removeAttribute('bleed');
					}
					if (value !== 'number') return;
				}

				if (value === 'unset' || value === '' || value === false) {
					layout.removeAttribute(name);
					return;
				}
				layout.setAttribute(name, value);
			}
		});
	</script>
</body>
</html>

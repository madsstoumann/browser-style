<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
	<title>Drug Ticket</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
	<meta name="description" content="Beregn din bøde for kørsel under påvirkning af stoffer">
	<style>
		body {
			font-family: system-ui;
			margin-inline: auto;
			max-width: 400px;
		}
		form {
			display: grid;
			gap: 1rem;
			padding: 1rem;
		}
		label, output {
			display: block;
		}
		fieldset[disabled] {
			opacity: 0.25;
		}
		[name=breakdown] {
			display: grid;
			grid-template-columns: 2fr 1fr;
			output {
				font-variant-numeric: tabular-nums;
				text-align: right;
			}
		}
	</style>
</head>
<body>

	<form id="app">
		<label for="income">Din månedsløn før skat:</label>
		<output for="income" name="income_output">25.000 kr.</output>
		<input type="range" id="income" name="income" min="0" step="500" max="60000" value="25000">

		<fieldset>
			<legend>Vælg stof</legend>
			<label><input type="radio" name="drug" value="1" checked><svg width="20" height="19"><use href="#cannabis"></use></svg>Cannabis</label>
			<label><input type="radio" name="drug" value="0"><svg width="20" height="19"><use href="#kokain"></use></svg>Kokain</label>
			<label><input type="radio" name="drug" value="0"><svg width="20" height="19"><use href="#lsd"></use></svg>LSD</label>
			<label><input type="radio" name="drug" value="0"><svg width="20" height="19"><use href="#andre"></use></svg>Ecstasy (MDMA)</label>
			<label><input type="radio" name="drug" value="0"><svg width="20" height="19"><use href="#amfetamin"></use></svg>Amfetamin</label>
			<label><input type="radio" name="drug" value="0"><svg width="20" height="19"><use href="#opioider"></use></svg>Opioider</label>
			<label><input type="radio" name="drug" value="2"><svg width="20" height="19"><use href="#andre"></use></svg>Lattergas</label>
		</fieldset>

		<fieldset>
			<fieldset name="thc_info" disabled>
				<legend>THC-niveau i blodet</legend>
				<label><input type="radio" name="thc" value="low" checked><svg width="13" height="10"><use href="#low"></use></svg>Lavt</label>
				<label><input type="radio" name="thc" value="medium"><svg width="13" height="10"><use href="#medium"></use></svg>Mellem</label>
				<label><input type="radio" name="thc" value="high"><svg width="13" height="10"><use href="#high"></use></svg>Højt</label>
			</fieldset>
			<fieldset name="gas_info" disabled>
				<legend>Lattergas i besiddelse</legend>
				<label><input type="radio" name="gas" value="none" checked><svg width="13" height="10"><use href="#none"></use></svg>Intet</label>
				<label><input type="radio" name="amount" value="low"><svg width="13" height="10"><use href="#low"></use></svg>Lavt</label>
				<label><input type="radio" name="amount" value="medium"><svg width="13" height="10"><use href="#medium"></use></svg>Mellem</label>
				<label><input type="radio" name="amount" value="high"><svg width="13" height="10"><use href="#high"></use></svg>Højt</label>
			</fieldset>

			<label>
				Hvor lang tid har du haft kørekort?
				<input type="checkbox" name="license_years">
				<span>Under 3 år</span>
				<span>+3 år</span>
			</label>

		<details open>
			<summary>
				Ca. Total (kr) <output name="total">1500</output>
			</summary>

			<fieldset name="breakdown">
				<span>Bødestørrelse</span>
				<output name="fine">1500</output>
				<span>Analyse af blodprøve</span>
				<output name="blood_analysis_output">2700</output>
				<span>Udgift til læge</span>
				<output name="doctor_fee_output">125</output>
				<span>Offerfonden</span>
				<output name="victim_fund_output">500</output>
				<span>ANT-kursus</span>
				<output name="ant_course_output">3200</output>
				<span>Ny teori- og køreprøve</span>
				<output name="license_test_output">1210</output>
				<strong>Totale udgifter (ca.)</strong>
				<output name="total_fine"></output>
			</fieldset>
		</details>
	</form>

	<script>
		const app = document.getElementById('app');

		function calculate(elements) {
			const isTHC = elements.drug.value === '1';
			const isGas = elements.drug.value === '2';
			elements.income_output.value = elements.income.value;
			elements.thc_info.disabled = !isTHC;
			elements.gas_info.disabled = !isGas;
			elements.fine.value = Math.round(((elements.income.value * 12) / 50) * (isTHC || isGas ? 2 : 1));
			/* set fine multiplier based on drug and amount */
			const subtotal = [...elements.breakdown.elements].reduce((sum, elm) => sum + parseInt(elm.value || 0), 0);
			elements.total.value = subtotal;
		
		}

		app.addEventListener('input', (event) => { calculate(app.elements) });
		calculate(app.elements);
	</script>

	<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol id="amfetamin" viewBox="0 0 20 19">
      <g transform="translate(1, 1)">
        <path fill="#000" d="M7.621 0 3.608 4.207l1.89 1.89L7.62 0Zm3.401 6.364L8.512.112 6.058 6.364h4.965Zm-4.775 9.105L3.693 5.162 5.351 6.82l1.692 9.258-.505-.394-.291-.215Zm7.384-11.184L9.405 0l2.336 6.175 1.89-1.89Zm-2.638 11.261 2.553-10.307-1.657 1.658-1.693 9.258.506-.394.29-.215ZM6 6.978 7.738 16.5h1.603l1.738-9.522H6Z"/>
      </g>
    </symbol>

    <symbol id="andre" viewBox="0 0 20 19">
      <g transform="translate(3, 1)">
        <path fill="#000" d="M6.456 9.533 2.624 13.36l-1.54-1.54C-1.37 9.215 2.3 5.534 4.91 7.989l1.546 1.545Zm3.137 4.052a2.688 2.688 0 0 0-.758-1.673L7.272 10.35l-3.826 3.832 1.54 1.54a2.711 2.711 0 0 0 4.607-2.136Zm-.388-3.456c-.035.145-.064.284-.098.423a4.259 4.259 0 0 1 1.655 3.456 2 2 0 0 0 2.026-1.552c.012-.075.156-.677.33-1.418l-3.913-.909Zm4.55-2.107A2.005 2.005 0 0 0 9.8 7.577c0 .029-.15.66-.33 1.43l3.913.902c.158-.621.282-1.251.37-1.887ZM5.605 2.75a2.002 2.002 0 0 0 1.962 3.49l1.28-.717-1.963-3.49-1.28.717ZM9.17.747l-1.279.717L9.853 4.96l1.28-.717A2.005 2.005 0 0 0 9.17.747Z"/>
      </g>
    </symbol>

    <symbol id="cannabis" viewBox="0 0 20 19">
      <path fill="#28292C" d="M12.223 12.316c4.125-3.16 5.39-7.022 5.41-7.081-.06.022-3.886 1.505-6.84 5.75C12.06 4.656 9.81 0 9.81 0s-2.25 4.655-.985 10.986C5.87 6.74 2.044 5.257 1.984 5.235c.02.06 1.286 3.921 5.41 7.081-4.074-.784-7.085.343-7.085.343s2.602 1.529 6.558 1.537c-1.378.628-2.112 1.434-2.112 1.434s2.269.134 4.539-1.529l-.016-.043a.86.86 0 0 0 .032.011v.032h.166V18h.666v-3.899h.165v-.032l.032-.011-.016.043c2.27 1.663 4.54 1.529 4.54 1.529s-.735-.806-2.113-1.434c3.956-.008 6.559-1.537 6.559-1.537s-3.012-1.127-7.086-.343Z"/>
    </symbol>

    <symbol id="kokain" viewBox="0 0 20 19">
      <g transform="translate(2, 1)">
        <path fill="#000" d="M14.121 1H1.501v15.827H14.12V1Zm-.6 15.226H2.1V4.606h11.42v11.62Zm0-12.221H2.1v-.601h11.42v.6Zm0-1.202H2.1V1.6h11.42v1.202Z"/>
        <path fill="#000" d="M3.003 15.625h9.616a.3.3 0 0 0 .3-.3v-4.508a.3.3 0 0 0-.3-.3c-1.695 0-2.627-.755-3.702-1.626-.298-.237-.601-.484-.932-.721-1.62-1.166-4.937-.087-5.075-.042a.303.303 0 0 0-.208.285v6.912c.001.166.135.3.301.3Z"/>
      </g>
    </symbol>

    <symbol id="lsd" viewBox="0 0 20 19">
      <g transform="translate(2, 1)">
        <path fill="#000" d="M15.43 2.5h.285A.287.287 0 0 0 16 2.214V.786A.287.287 0 0 0 15.715.5h-1.429a.287.287 0 0 0-.285.286v.285a.286.286 0 1 1-.572 0V.786A.287.287 0 0 0 13.143.5H12a.287.287 0 0 0-.285.286v.285a.286.286 0 1 1-.572 0V.786A.287.287 0 0 0 10.858.5H9.715a.287.287 0 0 0-.286.286v.285a.286.286 0 1 1-.571 0V.786A.287.287 0 0 0 8.572.5H7.429a.287.287 0 0 0-.286.286v.285a.286.286 0 1 1-.571 0V.786A.287.287 0 0 0 6.286.5H5.143a.287.287 0 0 0-.285.286v.285a.286.286 0 1 1-.572 0V.786A.287.287 0 0 0 4 .5H2.858a.287.287 0 0 0-.286.286v.285a.286.286 0 1 1-.572 0V.786A.287.287 0 0 0 1.715.5H.286A.287.287 0 0 0 0 .786v1.428a.287.287 0 0 0 .286.286h.286a.286.286 0 1 1 0 .571H.286A.287.287 0 0 0 0 3.357V4.5a.287.287 0 0 0 .286.286h.286a.286.286 0 1 1 0 .571H.286A.287.287 0 0 0 0 5.643v1.143a.286.286 0 0 0 .286.285h.286a.286.286 0 1 1 0 .572H.286A.287.287 0 0 0 0 7.929V9.07a.287.287 0 0 0 .286.286h.286a.286.286 0 1 1 0 .572H.286a.287.287 0 0 0-.286.285v1.143a.287.287 0 0 0 .286.286h.286a.286.286 0 1 1 0 .571H.286A.287.287 0 0 0 0 12.5v1.143a.287.287 0 0 0 .286.286h.286a.286.286 0 1 1 0 .571H.286a.287.287 0 0 0-.286.286v1.428a.287.287 0 0 0 .286.286h1.429A.287.287 0 0 0 2 16.214v-.285a.286.286 0 1 1 .572 0v.285c0 .158.128.285.286.286H4a.287.287 0 0 0 .286-.286v-.285a.286.286 0 1 1 .572 0v.285c0 .158.127.285.285.286h1.143a.287.287 0 0 0 .286-.286v-.285a.286.286 0 1 1 .571 0v.285a.287.287 0 0 0 .286.286h1.143a.287.287 0 0 0 .286-.286v-.285a.286.286 0 1 1 .571 0v.285c0 .158.128.285.286.286h1.143a.287.287 0 0 0 .285-.286v-.285a.286.286 0 1 1 .572 0v.285c0 .158.128.285.286.286h1.142a.287.287 0 0 0 .286-.286v-.285a.286.286 0 1 1 .572 0v.285c0 .158.127.285.285.286h1.429a.287.287 0 0 0 .285-.286v-1.428a.287.287 0 0 0-.285-.286h-.286a.286.286 0 1 1 0-.571h.286a.287.287 0 0 0 .285-.286V12.5a.287.287 0 0 0-.285-.286h-.286a.286.286 0 1 1 0-.571h.286a.287.287 0 0 0 .285-.286v-1.143a.287.287 0 0 0-.285-.285h-.286a.286.286 0 1 1 0-.572h.286A.287.287 0 0 0 16 9.071V7.93a.287.287 0 0 0-.285-.286h-.286a.286.286 0 1 1 0-.572h.286A.287.287 0 0 0 16 6.786V5.643a.287.287 0 0 0-.285-.286h-.286a.286.286 0 1 1 0-.571h.286A.287.287 0 0 0 16 4.5V3.357a.287.287 0 0 0-.285-.286h-.286a.286.286 0 1 1 0-.571ZM8 13.929A5.429 5.429 0 1 1 8 3.07a5.429 5.429 0 0 1 0 10.86Z"/>
        <path fill="#000" d="M8 3.643A4.855 4.855 0 0 0 3.144 8.5a4.854 4.854 0 0 0 4.858 4.857 4.855 4.855 0 0 0 3.432-8.29 4.868 4.868 0 0 0-3.432-1.424Zm1.226 2.774a.286.286 0 0 1 .203-.49c.076 0 .15.03.203.084l.369.372.368-.372a.286.286 0 0 1 .49.203c0 .076-.03.15-.084.203l-.372.369.372.368a.288.288 0 0 1 0 .406.29.29 0 0 1-.406 0l-.368-.371-.369.371a.29.29 0 0 1-.406 0 .288.288 0 0 1 0-.406l.372-.368-.372-.369Zm-4 0a.286.286 0 0 1 .203-.49c.076 0 .15.03.203.084L6 6.383l.368-.372a.286.286 0 0 1 .49.203c0 .076-.03.15-.084.203l-.372.369.372.368a.288.288 0 0 1 0 .406.29.29 0 0 1-.406 0L6 7.189l-.37.371a.29.29 0 0 1-.405 0 .288.288 0 0 1 0-.406l.372-.368-.372-.369Zm6.309 1.917c.11.044.18.153.177.272a3.714 3.714 0 0 1-7.423 0 .288.288 0 0 1 .494-.206 4.429 4.429 0 0 0 6.434 0 .286.286 0 0 1 .318-.066Z"/>
      </g>
    </symbol>

    <symbol id="opioider" viewBox="0 0 20 19">
      <g transform="translate(2, 1)">
        <path fill="#000" d="M5.414 5.051 8.72 1.747a4.273 4.273 0 0 1 6.034 0 4.273 4.273 0 0 1 0 6.035l-3.304 3.304L5.414 5.05Zm-.862.863L1.247 9.218a4.273 4.273 0 0 0 0 6.035A4.254 4.254 0 0 0 4.264 16.5a4.26 4.26 0 0 0 3.018-1.247l3.304-3.305-6.034-6.034Z"/>
      </g>
    </symbol>

    <symbol id="high" viewBox="0 0 13 10">
      <rect width="13" height="1.5" y=".75" fill="#28292C" rx=".75"/>
      <path fill="#28292C" d="M0 5a.75.75 0 0 1 .75-.75h11.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 5Z"/>
      <rect width="13" height="1.5" y="7.75" fill="#28292C" rx=".75"/>
    </symbol>

    <symbol id="medium" viewBox="0 0 13 10">
      <rect width="13" height="1.5" y=".75" fill="#888" rx=".75"/>
      <path fill="#28292C" d="M0 5a.75.75 0 0 1 .75-.75h11.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 5Z"/>
      <rect width="13" height="1.5" y="7.75" fill="#28292C" rx=".75"/>
    </symbol>

    <symbol id="low" viewBox="0 0 13 10">
      <rect width="13" height="1.5" y=".75" fill="#888" rx=".75"/>
      <path fill="#888" d="M0 5a.75.75 0 0 1 .75-.75h11.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 5Z"/>
      <rect width="13" height="1.5" y="7.75" fill="#28292C" rx=".75"/>
    </symbol>

    <symbol id="none" viewBox="0 0 13 10">
      <rect width="13" height="1.5" y=".75" fill="#888" rx=".75"/>
      <path fill="#888" d="M0 5a.75.75 0 0 1 .75-.75h11.5a.75.75 0 0 1 0 1.5H.75A.75.75 0 0 1 0 5Z"/>
      <rect width="13" height="1.5" y="7.75" fill="#888" rx=".75"/>
    </symbol>
  </defs>
</svg>
</body>
</html>
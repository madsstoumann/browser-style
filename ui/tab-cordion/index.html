<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../icon/index.css">
	<title>Tab Cordion</title>
	<style>
		body {
			background: Canvas;
			color: CanvasText;
			color-scheme: light dark;
			font-family: system-ui;
			interpolate-size: allow-keywords;
			margin: 1rem 2ch;
		}

/* === Tab Cordion === */
	/* @import "../icon/index.css"; */
@scope (tab-cordion) {

	@property --tab-cordion-index {
		syntax: "<integer>";
		inherits: true;
		initial-value: 1;
	}
	:scope {
		--tab-cordion-accent: light-dark(hsl(210, 100%, 45%), hsl(210, 100%, 75%));
		--tab-cordion-bdrs: 0px;
		--tab-cordion-bdc: light-dark(hsl(0 0% 80%), hsl(0 0% 20%));
		--tab-cordion-bdw: 1px;
		--tab-cordion-bxsh: 0 0 1px 0 rgba(0, 0, 0, .07), 0 1px 1px 0 rgba(0, 0, 0, .06), 0 1px 2px 0 rgba(0, 0, 0, .1);
		--tab-cordion-bdc-open: tomato;
		--tab-cordion-bdw-open: 1px;
		--tab-cordion-bxsh-open: 0 0 2px 0 rgba(0, 0, 0, .14), 0 2px 2px 0 rgba(0, 0, 0, .12), 0 1px 3px 0 rgba(0, 0, 0, .2);
		--tab-cordion-gap: 1ch;

		background: var(--tab-cordion-bg, #EEE);
		container-type: inline-size;
		padding: var(--tab-cordion-p, 1rem);
		display: block;


		/* --- breakout --- */
		&[from~="breakout"] {
			&:not([to]) {
				details {
					&[open] + details {
						border-block-start: var(--tab-cordion-bdw) solid var(--tab-cordion-bdc);
					}
				}
				[open] {
					border: var(--tab-cordion-bdw-open, inherit) solid var(--tab-cordion-bdc-open, inherit);
				}
				[open]:not(:first-of-type),
				[open]:first-of-type ~ details { --_y: 1; }
				[open] ~ details { --_y: 2; }
			}
			&[to] {
				@container (width < 700px) {
					details {
						&[open] + details {
							border-block-start: var(--tab-cordion-bdw) solid var(--tab-cordion-bdc);
						}
					}
					[open] {
						border: var(--tab-cordion-bdw-open, inherit) solid var(--tab-cordion-bdc-open, inherit);
					}
					[open]:not(:first-of-type),
					[open]:first-of-type ~ details { --_y: 1; }
					[open] ~ details { --_y: 2; }
				}
			}

			/* --- elevated --- */
			&[from~="elevated"] {
				--tab-cordion-bdw-open: 0px;
				&:not([to]) {
					[open] {
						box-shadow: var(--tab-cordion-bxsh-open);
					}
					details {
						&:last-of-type:not([open]),
						&:has(+ details[open]) {
							box-shadow: var(--tab-cordion-bxsh);
						}
					}
				}
				&[to] {
					@container (width < 700px) {
						[open] {
							box-shadow: var(--tab-cordion-bxsh-open);
						}
						details {
							&:last-of-type:not([open]),
							&:has(+ details[open]) {
								box-shadow: var(--tab-cordion-bxsh);
							}
						}
					}
				}
			}
		}

		/* --- contain --- */
		&[from~="contain"] {
			&:not([to]) {
				details {
					border-inline: var(--tab-cordion-bdw) solid var(--tab-cordion-bdc);
				}
				&:not([from~="breakout"]) {
					details {
						&:first-of-type {
							border-block-start: var(--tab-cordion-bdw) solid var(--tab-cordion-bdc);
						}
					}
				}
				&[from~="breakout"] {
					details {
						&:first-of-type:not([open]) {
							border-block-start: var(--tab-cordion-bdw) solid var(--tab-cordion-bdc);
						}
					}
				}
				&:not([from~="divided"]) {
					details {
						&:last-of-type {
							border-block-end: var(--tab-cordion-bdw) solid var(--tab-cordion-bdc);
						}
					}
				}
			}
			&[to] {
				@container (width < 700px) {
					details {
						border-inline: var(--tab-cordion-bdw) solid var(--tab-cordion-bdc);
					}
					&:not([from~="breakout"]) {
						details {
							&:first-of-type {
								border-block-start: var(--tab-cordion-bdw) solid var(--tab-cordion-bdc);
							}
						}
					}
					&[from~="breakout"] {
						details {
							&:first-of-type:not([open]) {
								border-block-start: var(--tab-cordion-bdw) solid var(--tab-cordion-bdc);
							}
						}
					}
					&:not([from~="divided"]) {
						details {
							&:last-of-type {
								border-block-end: var(--tab-cordion-bdw) solid var(--tab-cordion-bdc);
							}
						}
					}
				}
			}
		}

		/* --- divided --- */
		&[from~="divided"] {
			&:not([to]) {
				details {
					border-block-end: var(--tab-cordion-bdw) solid var(--tab-cordion-bdc);
				}
			}
			&[to] {
				@container (width < 700px) {
					details {
						border-block-end: var(--tab-cordion-bdw) solid var(--tab-cordion-bdc);
					}
				}
			}
		}

		&[from~="rounded"] {
			--tab-cordion-bdrs: 1em;

			/* Without breakout: simple first/last border-radius */
			&:not([from~="breakout"]) {
				&:not([to]) {
					details {
						&:first-of-type,
						&:first-of-type summary {
							border-top-left-radius: var(--tab-cordion-bdrs);
							border-top-right-radius: var(--tab-cordion-bdrs);
						}
						&:last-of-type,
						&:last-of-type summary {
							border-bottom-left-radius: var(--tab-cordion-bdrs);
							border-bottom-right-radius: var(--tab-cordion-bdrs);
						}
					}
				}
				&[to] {
					@container (width < 700px) {
						details {
							&:first-of-type,
							&:first-of-type summary {
								border-top-left-radius: var(--tab-cordion-bdrs);
								border-top-right-radius: var(--tab-cordion-bdrs);
							}
							&:last-of-type,
							&:last-of-type summary {
								border-bottom-left-radius: var(--tab-cordion-bdrs);
								border-bottom-right-radius: var(--tab-cordion-bdrs);
							}
						}
					}
				}
			}

			/* With breakout: dynamic border-radius based on open state */
			&[from~="breakout"] {
				&:not([to]) {
					details {
						&:first-of-type,
						&[open] + details,
						&[open] + details summary {
							border-top-left-radius: var(--tab-cordion-bdrs);
							border-top-right-radius: var(--tab-cordion-bdrs);
						}
						&:last-of-type,
						&:has(+ details[open]),
						&:has(+ details[open]) summary {
							border-bottom-left-radius: var(--tab-cordion-bdrs);
							border-bottom-right-radius: var(--tab-cordion-bdrs);
						}
					}
					[open] {
						border-radius: var(--tab-cordion-bdrs);
					}
				}
				&[to] {
					@container (width < 700px) {
						details {
							&:first-of-type,
							&[open] + details,
							&[open] + details summary {
								border-top-left-radius: var(--tab-cordion-bdrs);
								border-top-right-radius: var(--tab-cordion-bdrs);
							}
							&:last-of-type,
							&:has(+ details[open]),
							&:has(+ details[open]) summary {
								border-bottom-left-radius: var(--tab-cordion-bdrs);
								border-bottom-right-radius: var(--tab-cordion-bdrs);
							}
						}
						[open] {
							border-radius: var(--tab-cordion-bdrs);
						}
					}
				}
			}
		}


	}

	details {
		--tab-cordion-index: sibling-index();
		/* --_y: 1; */
    
		background: var(--tab-cordion-item-bg, Canvas);
		interpolate-size: allow-keywords;
		translate: 0 calc(var(--_y) * 1rem);

		transition-duration: 0.3s;
		transition-property: translate;
		transition-timing-function: ease;
	}


	@media (hover: hover) {
		details:hover:not([open]) {
			background: var(--tab-cordion-hover-bg, rgb(216, 236, 242));
		}
	}


	[open]::details-content {
		border-radius: inherit;
		height: fit-content;
		padding-block: 2ch;
	}

	summary {
		/* background: var(--layout-composer-tabs-bg, light-dark(#EEE, #222)); */
		/* border-block-end: 2px solid var(--tab-cordion-bdc); */
		/* border-radius: var(--tab-cordion-bdrs); */
		
		color: var(--tabs-group-c, inherit);
		corner-shape: superellipse(1.25);
		cursor: pointer;
		display: flex;
		font-family: var(--tab-cordion-ff, inherit);
		/* font-size: var(--tab-cordion-fs, clamp(.75rem, 2.5vw, 1rem)); */
		grid-column: var(--tab-cordion-index);
		grid-row: 1;
		/* isolation: isolate; */
		justify-content: space-between;
		list-style: none;
		padding: var(--tab-cordion-p, 1.5ch);
		position: relative;
		text-align: var(--tabl-group-tal, center);
		text-box: cap alphabetic;
	 	/* */
		transition: all .2s ease;
		user-select: none;
		&:focus-visible {
			outline-color: var(--tab-cordion-accent);
			outline-offset: -4px;
		}
	}
	cq-box {
		display: grid;
		/* padding-block: var(--tab-cordion-gap); */
	}

	@container (width > 700px) {
		&[to] {
			cq-box {
				--tab-cordion-gap: var(--tab-cordion-desktop-gap, 2ch);
				grid-template-columns: repeat(var(--tab-cordion-tabs, 6), 1fr);
				grid-template-rows: auto 1fr;
				
				row-gap: 0;
			}
			details {
				border: unset;
				/* border-block-end: 3px solid #EEE; */
				border-radius: 0;
				display: grid;
				grid-column: 1 / -1;
				grid-row: 1 / span 2;
				grid-template-columns: subgrid;
				grid-template-rows: subgrid;
				/* &:not(:first-of-type):not(:last-of-type) summary { border-radius: 0; }
				&:first-of-type summary { border-radius: var(--tab-cordion-bdrs) 0 0 var(--tab-cordion-bdrs); }
				&:last-of-type summary { border-radius: 0 var(--tab-cordion-bdrs) var(--tab-cordion-bdrs) 0; } */
				&[open] summary { text-decoration: 3px underline var(--tab-cordion-accent); }
			}
			details::details-content {
				grid-column: 1 / -1;
				grid-row: 2;
			}
			summary {
				justify-self: center;
				
				text-underline-offset: 100%;
				/* text-decoration: underline;
    		text-decoration-thickness: var(--tab-cordion-tdt, 3px);
    		text-underline-offset: 1rem; */
			}
			ui-icon { display: none; } /* TODO! */
		}
	}
}


fieldset { border: 0; }
	 </style>
</head>
<body>

	<!--
	type="seamless" - No visible borders/lines between items (minimal, clean)
type="divided" - Horizontal lines between each item (classic accordion)
type="bordered" - Each item has a full border (card-like)
type="elevated" - Items have subtle elevation/shadow (material design)
type="breakout" - Your current implementation (expanded item breaks out visually)
	-->

<tab-cordion from="divided" to="">
	<cq-box>
		<details name="tabs">
			<summary>Breakpoints<ui-icon type="plus-cross"></ui-icon></summary>
			<fieldset name="breakpoints">
				<label>Small
					<select name="sm">
						<option value="unset">None</option>
						<optgroup label="Columns"></optgroup>
						<option value="columns(2)">columns(2)</option>
						</select>
				</label>

				<label>Medium
					<select name="md">
						<option value="unset">None</option>
						<optgroup label="Columns"></optgroup>
						<option value="columns(2)">columns(2)</option>
						<option value="columns(3)">columns(3)</option>
						<option value="columns(4)">columns(4)</option>
						
						<optgroup label="Grid"></optgroup>
						
						<option value="grid(3a)" data-items="3">grid(3a)</option>
						<option value="grid(3b)">grid(3b)</option>
						<option value="grid(3c)">grid(3c)</option>
						<option value="grid(3d)" >grid(3d)</option>
					</select>
				</label>
				<label>Large
					<select name="lg">
						<optgroup label="Grid"></optgroup>
						<option value="unset">None</option>
						<option value="grid(3a)" data-items="3">grid(3a)</option>
						<option value="grid(3b)">grid(3b)</option>
						<option value="grid(3c)">grid(3c)</option>
						<option value="grid(3d)">grid(3d)</option>
					</select>
				</label>

			</fieldset>
		</details>

		<details name="tabs">
			<summary>Spacing<ui-icon type="plus-cross"></ui-icon></summary>
			<fieldset name="spacing">
				<label>
					Space Top
					<input type="number" name="space-top" value="0" min="0">
				</label>
				<label>
					Space Bottom
					<input type="number" name="space-bottom" value="0" min="0">
				</label>
				<label>
					Padding Top
					<input type="number" name="pad-top" value="0" min="0">
				</label>
				<label>
					Padding Bottom
					<input type="number" name="pad-bottom" value="0" min="0">
				</label>
				<label>
					Padding Inline
					<input type="number" name="pad-inline" value="0" min="0">
				</label>
			</fieldset>
		</details>

		<details name="tabs" >
			<summary>Gaps<ui-icon type="plus-cross"></ui-icon></summary>
			<fieldset name="gaps">
				<label>
					Column Gap
					<input type="number" name="col-gap" value="1" min="0" step="0.5">
				</label>
				<label>
					Row Gap
					<input type="number" name="row-gap" value="1" min="0" step="0.5">
				</label>
			</fieldset>
		</details>

		<details name="tabs">
			<summary>Layout<ui-icon type="plus-cross"></ui-icon></summary>
			<fieldset name="layout">
				<label>Bleed
					<input type="number" name="bleed" value="0" min="-100" max="100">
				</label>
				<label>Bleed mode
					<select name="bleed-mode">
						<option value="none">None</option>
						<option value="full">Full</option>
						<option value="number" selected>Numeric</option>
					</select>
				</label>

				<label>
					Overflow
					<select name="overflow">
						<option value="unset">None</option>
						<option value="none">Hidden</option>
						<option value="preview">Preview</option>
						<option value="dynamic">Dynamic</option>
					</select>
				</label>
				<label>
					Theme
					<select name="theme">
						<option value="unset">None</option>
						<option value="primary">Primary</option>
						<option value="secondary">Secondary</option>
						<option value="tertiary">Tertiary</option>
					</select>
				</label>
				<label>
					Width Preset
					<select name="width">
						<option value="">None</option>
						<option value="xs">XS (20rem)</option>
						<option value="sm">SM (30rem)</option>
						<option value="md">MD (48rem)</option>
						<option value="lg">LG (64rem)</option>
						<option value="xl">XL (80rem)</option>
						<option value="xxl">XXL (96rem)</option>
					</select>
				</label>
			</fieldset>
		</details>

		<details name="tabs">
			<summary>Animation<ui-icon type="plus-cross"></ui-icon></summary>
			<fieldset name="animations">
				<label>
					Animation Name
					<select name="animationName">
						<option value="">None</option>

							<optgroup label="Fade">
								<option value="fade-in">fade-in</option><option value="fade-up">fade-up</option><option value="fade-down">fade-down</option><option value="fade-left">fade-left</option><option value="fade-right">fade-right</option><option value="fade-in-scale">fade-in-scale</option><option value="fade-out">fade-out</option><option value="fade-out-scale">fade-out-scale</option>
							</optgroup>

							<optgroup label="Bounce">
								<option value="bounce">bounce</option><option value="bounce-in-up">bounce-in-up</option><option value="bounce-in-down">bounce-in-down</option><option value="bounce-in-left">bounce-in-left</option><option value="bounce-in-right">bounce-in-right</option>
							</optgroup>

							<optgroup label="Zoom">
								<option value="zoom-in">zoom-in</option><option value="zoom-out">zoom-out</option><option value="zoom-in-rotate">zoom-in-rotate</option><option value="zoom-out-rotate">zoom-out-rotate</option>
							</optgroup>

							<optgroup label="Slide">
								<option value="slide-in">slide-in</option><option value="slide-out">slide-out</option><option value="slide-up">slide-up</option><option value="slide-down">slide-down</option>
							</optgroup>

							<optgroup label="Flip">
								<option value="flip-up">flip-up</option><option value="flip-down">flip-down</option><option value="flip-left">flip-left</option><option value="flip-right">flip-right</option><option value="flip-diagonal">flip-diagonal</option>
							</optgroup>

							<optgroup label="Reveal">
								<option value="reveal">reveal</option><option value="reveal-circle">reveal-circle</option><option value="reveal-polygon">reveal-polygon</option>
							</optgroup>

							<optgroup label="Other">
								<option value="opacity">opacity</option>
							</optgroup>

					</select>
				</label>
				<label>
					Animation Range
					<select name="animationRange">
						<option value="">Default</option>
						<option value="contain">Contain</option>
						<option value="cover">Cover</option>
						<option value="exit">Exit</option>
					</select>
				</label>
			</fieldset>
		</details>

		<details name="tabs">
			<summary>Advanced<ui-icon type="plus-cross"></ui-icon></summary>
			<fieldset name="advanced">
				<label>
					ARIA Label
					<input type="text" name="aria-label" value="">
				</label>
				<label>Gap Decorations
					<select name="gap-decorations">
						<option value="unset">None</option>
						<option value="cols">Columns</option>
						<option value="rows">Rows</option>
						<option value="cols rows">Both</option>
					</select>
				</label>
				<label>
					Intrinsic Size
					<select name="size">
						<option value="auto">auto</option>
						<option value="unset">None</option>
						<option value="200px">200px</option>
						<option value="300px">300px</option>
						<option value="400px">400px</option>
						<option value="500px">500px</option>
						<option value="600px">600px</option>
						<option value="50vh">50vh</option>
						<option value="75vh">75vh</option>
						<option value="100vh">100vh</option>
					</select>
				</label>
				<label>
					Self Alignment
					<select name="self">
						<option value="unset">None</option>
						<option value="auto">auto</option>
						<option value="start">start</option>
						<option value="end">end</option>
						<option value="center">center</option>
						<option value="stretch">stretch</option>
						<option value="baseline">baseline</option>
						<option value="self-start">self-start</option>
						<option value="self-end">self-end</option>
					</select>
				</label>
			</fieldset>
		</details>
	</cq-box>
</tab-cordion>


<form id="controls" style="margin-top:5rem">
	<fieldset>
		<legend>from</legend>
		<label>
			<input type="checkbox" value="breakout" > Breakout
		</label><br>
		<label>
			<input type="checkbox" value="contain" > Contain
		</label><br>
		<label>
			<input type="checkbox" value="divided" checked> Divided
		</label><br>
		<label>
			<input type="checkbox" value="elevated" > Elevated (requires <code>breakout</code>)
		</label><br>
		<label>
			<input type="checkbox" value="rounded" > Rounded
		</label>
	</fieldset>
</form>

<script>
const tabCordion = document.querySelector('tab-cordion');
const controls = document.getElementById('controls');

controls.addEventListener('change', (e) => {
	if (e.target.type === 'checkbox') {
		const value = e.target.value;
		const currentFrom = tabCordion.getAttribute('from') || '';
		const fromValues = currentFrom.split(' ').filter(v => v.trim());

		if (e.target.checked) {
			// Add value if not already present
			if (!fromValues.includes(value)) {
				fromValues.push(value);
			}
		} else {
			// Remove value
			const index = fromValues.indexOf(value);
			if (index > -1) {
				fromValues.splice(index, 1);
			}
		}

		tabCordion.setAttribute('from', fromValues.join(' '));
	}
});
</script>



</body>
</html>
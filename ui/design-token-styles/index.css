/**
 * Shared styles for design token editors
 * Used by design-token, edit-color, and all edit-* components
 */

:host {
	color-scheme: inherit;
	display: grid;
	font-family: system-ui, sans-serif;
	row-gap: 1rem;
	--_v: initial;
}

/* === GLOBAL FORM ELEMENTS === */
input, select, textarea {
	border: 1px solid #EEE;
	border-radius: .25rem;
	font-family: inherit;
	font-size: .75rem;
	padding: .25rem .5rem;
}

label {
	display: inline-grid;
	font-size: 12px;
	gap: .125rem;
}

textarea {
	field-sizing: content;
	resize: vertical;
}

/* === DESIGN TOKEN BUTTON === */
[part="design-token-button"] {
	appearance: none;
	border: 1px solid #ccc;
	background: Canvas;
	padding: 0.5rem;
	border-radius: 4px;
	cursor: pointer;
	display: inline-grid;
	align-items: center;
	gap: 0.5rem;
	width: 100%;
	word-break: break-all;
	/* text-align: left; */
	font-family: inherit;

	&::before {
		content: '';
		display: block;
		/* width: 1.5rem; */
		height: 1.5rem;
		border: 1px solid #eee;
		border-radius: 4px;
		background: #eee; /* Fallback */
		flex-shrink: 0;
	}
}

/* === TYPE SPECIFIC PREVIEWS === */
:host([type="color"]) [part="design-token-button"]::before {
	background-color: #fff;
	background-image:
		linear-gradient(var(--_v), var(--_v)),
		conic-gradient(#eee 0.25turn, #fff 0.25turn 0.5turn, #eee 0.5turn 0.75turn, #fff 0.75turn);
	background-size: 100% 100%, 0.5rem 0.5rem;
	background-repeat: no-repeat, repeat;
}

:host([type="border"]) [part="design-token-button"]::before {
	background: transparent;
	border: var(--_v);
}

:host([type="shadow"]) [part="design-token-button"]::before {
	background: #fff;
	box-shadow: var(--_v);
}

:host([type="gradient"]) [part="design-token-button"]::before {
	background: var(--_v);
}

:host([type="aspectRatio"]) [part="design-token-button"]::before {
	width: 2rem;
	height: auto;
	aspect-ratio: var(--_v);
	background: #ccc;
}

/* === DESIGN TOKEN DIALOG === */
[part="design-token-dialog"] {
	border: none;
	border-radius: 2rem;
	box-shadow: 0 -1px 2px 0 hsl(220 3% 15% / calc(1% + 2%)), 0 2px 1px -2px hsl(220 3% 15% / calc(1% + 3%)), 0 5px 5px -2px hsl(220 3% 15% / calc(1% + 3%)), 0 10px 10px -2px hsl(220 3% 15% / calc(1% + 4%)), 0 20px 20px -2px hsl(220 3% 15% / calc(1% + 5%)), 0 40px 40px -2px hsl(220 3% 15% / calc(1% + 7%));
	corner-shape: squircle;
	padding: 1.5rem;

	details {
		display: grid;
		grid-column: 1 / -1;
		grid-row: 1 / span 2;
		grid-template-columns: subgrid;
		grid-template-rows: subgrid;
		&:nth-of-type(1) > summary { grid-column: 1; }
		&:nth-of-type(2) > summary { grid-column: 2; }
		&:nth-of-type(3) > summary { grid-column: 3; justify-self: start; }
		&[open] > summary { border-color: cornflowerblue; }
	}

	details::details-content {
		grid-column: 1 / -1;
		grid-row: 2;
	}

	fieldset {
		all: unset;
		display: grid;
		gap: .75rem;
	}

	form {
		display: grid;
		row-gap: 1.5rem;
	}

	cq-box {
		column-gap: 1.5rem;
		display: grid;
		grid-template-columns: min-content min-content auto;
		row-gap: .75rem;
	}

	h2 {
		font-weight: 500;
		margin: 0;
		text-box: cap alphabetic;
	}

	summary {
		border-block-end: 3px solid #0000;
		grid-row: 1;
		list-style: none;
		padding-block-end: 8px;
		text-wrap: nowrap;
		user-select: none;
		z-index: 1;
		& + * {
			pointer-events: auto;
			position: relative;
			z-index: 1;
		}
	}
}

/* === EDIT COLOR PREVIEW === */
[part="edit-color-preview"] {
	height: 3rem;
	border-radius: 4px;
	border: 1px solid #EEE;
	background-color: #fff;
	background-image:
		linear-gradient(var(--preview-color, transparent), var(--preview-color, transparent)),
		conic-gradient(#eee 0.25turn, #fff 0.25turn 0.5turn, #eee 0.5turn 0.75turn, #fff 0.75turn);
	background-size: 100% 100%, 1rem 1rem;
	background-repeat: no-repeat, repeat;
}

/* === EDIT COLOR ROW === */
[part="edit-color-row"] {
	all: unset;
	align-items: start;
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(0, 1fr));
	gap: 0.5rem;
}

[part="edit-color-row"]:has([type="range"]) {
	align-items: center;
	grid-template-columns: 1ch 1fr 7ch;
}
